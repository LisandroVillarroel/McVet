{"ast":null,"code":"import { MatTableDataSource } from '@angular/material/table';\nimport { FormControl, Validators, FormGroup, FormArray } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./../../../servicios/venta.service\";\n\nfunction DetalleVentaComponent_th_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 27);\n    i0.ɵɵtext(1, \" N\\u00BA \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetalleVentaComponent_td_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const i_r17 = ctx.dataIndex;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i_r17 + 1, \" \");\n  }\n}\n\nfunction DetalleVentaComponent_th_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 29);\n    i0.ɵɵtext(1, \" Cantidad \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetalleVentaComponent_td_14_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0);\n  }\n\n  if (rf & 2) {\n    const element_r18 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵtextInterpolate(element_r18.cantidad);\n  }\n}\n\nfunction DetalleVentaComponent_td_14_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"input\", 34);\n  }\n\n  if (rf & 2) {\n    const index_r19 = i0.ɵɵnextContext().dataIndex;\n    const ctx_r21 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formControl\", ctx_r21.getControl(index_r19, \"cantidad\"));\n  }\n}\n\nfunction DetalleVentaComponent_td_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\", 30);\n    i0.ɵɵelementStart(1, \"editable\", 31);\n    i0.ɵɵlistener(\"update\", function DetalleVentaComponent_td_14_Template_editable_update_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r25);\n      const index_r19 = restoredCtx.dataIndex;\n      const ctx_r24 = i0.ɵɵnextContext();\n      return ctx_r24.updateField(index_r19, \"cantidad\");\n    });\n    i0.ɵɵtemplate(2, DetalleVentaComponent_td_14_ng_template_2_Template, 1, 1, \"ng-template\", 32);\n    i0.ɵɵtemplate(3, DetalleVentaComponent_td_14_ng_template_3_Template, 1, 1, \"ng-template\", 33);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetalleVentaComponent_th_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 35);\n    i0.ɵɵtext(1, \" Detalle Producto \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetalleVentaComponent_td_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 36);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r26 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r26.detalleProd, \" \");\n  }\n}\n\nfunction DetalleVentaComponent_th_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 37);\n    i0.ɵɵtext(1, \" %Desc. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetalleVentaComponent_td_20_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0);\n  }\n\n  if (rf & 2) {\n    const element_r27 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵtextInterpolate1(\"\", element_r27.descuento, \"%\");\n  }\n}\n\nfunction DetalleVentaComponent_td_20_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"input\", 34);\n  }\n\n  if (rf & 2) {\n    const index_r28 = i0.ɵɵnextContext().dataIndex;\n    const ctx_r30 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formControl\", ctx_r30.getControl(index_r28, \"descuento\"));\n  }\n}\n\nfunction DetalleVentaComponent_td_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r34 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\", 38);\n    i0.ɵɵelementStart(1, \"editable\", 39);\n    i0.ɵɵlistener(\"update\", function DetalleVentaComponent_td_20_Template_editable_update_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r34);\n      const index_r28 = restoredCtx.dataIndex;\n      const ctx_r33 = i0.ɵɵnextContext();\n      return ctx_r33.updateField(index_r28, \"descuento\");\n    });\n    i0.ɵɵtemplate(2, DetalleVentaComponent_td_20_ng_template_2_Template, 1, 1, \"ng-template\", 32);\n    i0.ɵɵtemplate(3, DetalleVentaComponent_td_20_ng_template_3_Template, 1, 1, \"ng-template\", 33);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetalleVentaComponent_th_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 29);\n    i0.ɵɵtext(1, \" Precio $ \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetalleVentaComponent_td_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 30);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"number\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r35 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" $\", i0.ɵɵpipeBind2(2, 1, element_r35.precio, \"1.0-0\"), \" \");\n  }\n}\n\nfunction DetalleVentaComponent_th_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 40);\n    i0.ɵɵtext(1, \" Sub Total \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetalleVentaComponent_td_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 41);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"number\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r36 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" $\", i0.ɵɵpipeBind2(2, 1, element_r36.cantidad * element_r36.precio - element_r36.precio * (element_r36.descuento / 100), \"1.0-0\"), \" \");\n  }\n}\n\nfunction DetalleVentaComponent_th_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 37);\n    i0.ɵɵtext(1, \" Eliminar \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetalleVentaComponent_td_29_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r39 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\", 38);\n    i0.ɵɵelementStart(1, \"button\", 42);\n    i0.ɵɵlistener(\"click\", function DetalleVentaComponent_td_29_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r39);\n      const element_r37 = restoredCtx.$implicit;\n      const ctx_r38 = i0.ɵɵnextContext();\n      return ctx_r38.eliminar(element_r37.codigoBarra, element_r37.detalleProd);\n    });\n    i0.ɵɵelementStart(2, \"mat-icon\", 43);\n    i0.ɵɵtext(3, \"delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DetalleVentaComponent_tr_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 44);\n  }\n}\n\nfunction DetalleVentaComponent_tr_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 45);\n  }\n}\n\nconst datoIventario = [{\n  codigoBarra: 'BKY00001',\n  nombre: 'Producto 1',\n  stock: 0,\n  precio: 1000\n}, {\n  codigoBarra: 'BKY00002',\n  nombre: 'Producto 2',\n  stock: 0,\n  precio: 2000\n}, {\n  codigoBarra: 'BKY00003',\n  nombre: 'Producto 3',\n  stock: 0,\n  precio: 3000\n}, {\n  codigoBarra: 'BKY00004',\n  nombre: 'Producto 4',\n  stock: 0,\n  precio: 4000\n}, {\n  codigoBarra: 'BKY00005',\n  nombre: 'Producto 5',\n  stock: 0,\n  precio: 5000\n}, {\n  codigoBarra: 'BKY00006',\n  nombre: 'Producto 6',\n  stock: 0,\n  precio: 6000\n}, {\n  codigoBarra: 'BKY00007',\n  nombre: 'Producto 7',\n  stock: 0,\n  precio: 7000\n}, {\n  codigoBarra: 'BKY00008',\n  nombre: 'Producto 8',\n  stock: 0,\n  precio: 8000\n}, {\n  codigoBarra: 'BKY00009',\n  nombre: 'Producto 9',\n  stock: 0,\n  precio: 9000\n}, {\n  codigoBarra: 'BKY00010',\n  nombre: 'Producto 10',\n  stock: 0,\n  precio: 10000\n}, {\n  codigoBarra: 'BKY00011',\n  nombre: 'Producto 11',\n  stock: 0,\n  precio: 11000\n}, {\n  codigoBarra: 'BKY00012',\n  nombre: 'Producto 12',\n  stock: 0,\n  precio: 12000\n}, {\n  codigoBarra: 'BKY00013',\n  nombre: 'Producto 13',\n  stock: 0,\n  precio: 13000\n}, {\n  codigoBarra: 'BKY00014',\n  nombre: 'Producto 14',\n  stock: 0,\n  precio: 14000\n}, {\n  codigoBarra: 'BKY00015',\n  nombre: 'Producto 15',\n  stock: 0,\n  precio: 15000\n}, {\n  codigoBarra: 'BKY00016',\n  nombre: 'Producto 16',\n  stock: 0,\n  precio: 16000\n}, {\n  codigoBarra: 'BKY00017',\n  nombre: 'Producto 17',\n  stock: 0,\n  precio: 17000\n}, {\n  codigoBarra: 'BKY00018',\n  nombre: 'Producto 18',\n  stock: 0,\n  precio: 18000\n}, {\n  codigoBarra: 'BKY00019',\n  nombre: 'Producto 19',\n  stock: 0,\n  precio: 19000\n}, {\n  codigoBarra: 'BKY00020',\n  nombre: 'Producto 20',\n  stock: 0,\n  precio: 20000\n}];\nexport let DetalleVentaComponent = /*#__PURE__*/(() => {\n  class DetalleVentaComponent {\n    constructor(ventaService) {\n      this.ventaService = ventaService;\n      this.displayedColumns = ['indice', 'cantidad', 'detalleProd', 'descuento', 'precio', 'subTotal', 'eliminar'];\n      this.dataSource = new MatTableDataSource(this.ventaService.detalleVenta);\n    }\n\n    ngOnInit() {\n      const ventaGrupos = this.ventaService.detalleVenta$.value.map(entity => {\n        return new FormGroup({\n          cantidad: new FormControl(entity.cantidad, [Validators.min(0), Validators.required]),\n          detalleProd: new FormControl(entity.detalleProd, Validators.required),\n          descuento: new FormControl(entity.descuento, Validators.required)\n        }, {\n          updateOn: 'blur'\n        });\n      });\n      this.controls = new FormArray(ventaGrupos);\n    }\n\n    updateField(index, field) {\n      const control = this.getControl(index, field);\n\n      if (control.valid) {\n        this.ventaService.update(index, field, control.value);\n        this.dataSource = new MatTableDataSource(this.ventaService.detalleVenta);\n      }\n    }\n\n    getControl(index, fieldName) {\n      const a = this.controls.at(index).get(fieldName); // console.log(fieldName, index);\n\n      return this.controls.at(index).get(fieldName);\n    }\n\n    eliminar(uno, dos) {\n      console.log(uno, dos);\n    }\n\n    buscaAgregaCodigoBarra() {\n      console.log('');\n    }\n\n  }\n\n  DetalleVentaComponent.ɵfac = function DetalleVentaComponent_Factory(t) {\n    return new (t || DetalleVentaComponent)(i0.ɵɵdirectiveInject(i1.VentaService));\n  };\n\n  DetalleVentaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DetalleVentaComponent,\n    selectors: [[\"app-detalle-venta\"]],\n    inputs: {\n      codigoBarraInput: \"codigoBarraInput\",\n      duplicadoInput: \"duplicadoInput\"\n    },\n    decls: 34,\n    vars: 6,\n    consts: [[1, \"container-fluid\"], [1, \"row\"], [1, \"col-12\"], [1, \"example-container\", \"mat-elevation-z8\"], [1, \"example-header\"], [\"src\", \"./../../../../assets/imagenes/codigoBarra.png\", \"width\", \"2%\", \"height\", \"2%\"], [\"matInput\", \"\", \"appAutoFocus\", \"\", \"placeholder\", \"C\\u00F3digo Barra\", \"autocomplete\", \"off\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"mat-table\", \"\", \"multiTemplateDataRows\", \"\", \"matSort\", \"\", 1, \"mat-elevation-z8\", 3, \"dataSource\"], [\"matColumnDef\", \"indice\"], [\"mat-header-cell\", \"\", \"style\", \"width: 3%;\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", \"style\", \" width: 3%;\", 4, \"matCellDef\"], [\"matColumnDef\", \"cantidad\"], [\"mat-header-cell\", \"\", \"style\", \" width: 13%;\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", \"style\", \" width: 13%;\", 4, \"matCellDef\"], [\"matColumnDef\", \"detalleProd\"], [\"mat-header-cell\", \"\", \"style\", \" width: 37%;\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", \"style\", \" width: 37%;\", 4, \"matCellDef\"], [\"matColumnDef\", \"descuento\"], [\"mat-header-cell\", \"\", \"style\", \" width: 10%;\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", \"style\", \" width: 10%;\", 4, \"matCellDef\"], [\"matColumnDef\", \"precio\"], [\"matColumnDef\", \"subTotal\"], [\"mat-header-cell\", \"\", \"style\", \" width: 14%;\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", \"style\", \" width: 14%;\", 4, \"matCellDef\"], [\"matColumnDef\", \"eliminar\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"mat-header-cell\", \"\", 2, \"width\", \"3%\"], [\"mat-cell\", \"\", 2, \"width\", \"3%\"], [\"mat-header-cell\", \"\", 2, \"width\", \"13%\"], [\"mat-cell\", \"\", 2, \"width\", \"13%\"], [2, \"width\", \"13%\", 3, \"update\"], [\"viewMode\", \"\"], [\"editMode\", \"\"], [\"matInput\", \"\", \"type\", \"number\", \"focusable\", \"\", \"editableOnEnter\", \"\", 3, \"formControl\"], [\"mat-header-cell\", \"\", 2, \"width\", \"37%\"], [\"mat-cell\", \"\", 2, \"width\", \"37%\"], [\"mat-header-cell\", \"\", 2, \"width\", \"10%\"], [\"mat-cell\", \"\", 2, \"width\", \"10%\"], [2, \"width\", \"10%\", 3, \"update\"], [\"mat-header-cell\", \"\", 2, \"width\", \"14%\"], [\"mat-cell\", \"\", 2, \"width\", \"14%\"], [\"mat-icon-button\", \"\", \"color\", \"accent\", 3, \"click\"], [\"matTooltip\", \"Click para eliminar\", \"matTooltipClass\", \"color-tooltip-red\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"]],\n    template: function DetalleVentaComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelementStart(5, \"mat-form-field\");\n        i0.ɵɵelement(6, \"img\", 5);\n        i0.ɵɵelementStart(7, \"input\", 6);\n        i0.ɵɵlistener(\"ngModelChange\", function DetalleVentaComponent_Template_input_ngModelChange_7_listener($event) {\n          return ctx.lectorCodBarra = $event;\n        })(\"change\", function DetalleVentaComponent_Template_input_change_7_listener() {\n          return ctx.buscaAgregaCodigoBarra();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"table\", 7);\n        i0.ɵɵelementContainerStart(9, 8);\n        i0.ɵɵtemplate(10, DetalleVentaComponent_th_10_Template, 2, 0, \"th\", 9);\n        i0.ɵɵtemplate(11, DetalleVentaComponent_td_11_Template, 2, 1, \"td\", 10);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(12, 11);\n        i0.ɵɵtemplate(13, DetalleVentaComponent_th_13_Template, 2, 0, \"th\", 12);\n        i0.ɵɵtemplate(14, DetalleVentaComponent_td_14_Template, 4, 0, \"td\", 13);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(15, 14);\n        i0.ɵɵtemplate(16, DetalleVentaComponent_th_16_Template, 2, 0, \"th\", 15);\n        i0.ɵɵtemplate(17, DetalleVentaComponent_td_17_Template, 2, 1, \"td\", 16);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(18, 17);\n        i0.ɵɵtemplate(19, DetalleVentaComponent_th_19_Template, 2, 0, \"th\", 18);\n        i0.ɵɵtemplate(20, DetalleVentaComponent_td_20_Template, 4, 0, \"td\", 19);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(21, 20);\n        i0.ɵɵtemplate(22, DetalleVentaComponent_th_22_Template, 2, 0, \"th\", 12);\n        i0.ɵɵtemplate(23, DetalleVentaComponent_td_23_Template, 3, 4, \"td\", 13);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(24, 21);\n        i0.ɵɵtemplate(25, DetalleVentaComponent_th_25_Template, 2, 0, \"th\", 22);\n        i0.ɵɵtemplate(26, DetalleVentaComponent_td_26_Template, 3, 4, \"td\", 23);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(27, 24);\n        i0.ɵɵtemplate(28, DetalleVentaComponent_th_28_Template, 2, 0, \"th\", 18);\n        i0.ɵɵtemplate(29, DetalleVentaComponent_td_29_Template, 4, 0, \"td\", 19);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(30, DetalleVentaComponent_tr_30_Template, 1, 0, \"tr\", 25);\n        i0.ɵɵtemplate(31, DetalleVentaComponent_tr_31_Template, 1, 0, \"tr\", 26);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"div\");\n        i0.ɵɵtext(33);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngModel\", ctx.lectorCodBarra);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n        i0.ɵɵadvance(22);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate2(\" valor: \", ctx.precioInput, \",\", ctx.productoInput, \" \");\n      }\n    },\n    styles: [\".example-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:300px}.mat-header-row[_ngcontent-%COMP%]{min-height:30px}tr.mat-header-row[_ngcontent-%COMP%]{height:15px}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.mat-table[_ngcontent-%COMP%]{overflow:auto;max-height:500px}.container-fluid[_ngcontent-%COMP%]{width:100%;padding-right:2px!important;padding-left:2px!important;margin-right:auto;margin-left:auto}  .color-tooltip-red{background:#b71c1c94}.mat-input-element[_ngcontent-%COMP%]{width:50%}th.mat-header-cell[_ngcontent-%COMP%]{text-align:center}td.mat-cell[_ngcontent-%COMP%]{padding-left:10px!important}\"]\n  });\n  return DetalleVentaComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}