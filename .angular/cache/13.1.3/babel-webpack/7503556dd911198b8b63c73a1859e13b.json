{"ast":null,"code":"import { __decorate, __param } from \"tslib\";\nimport { Component, Inject } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { validateRut, formatRut, RutFormat } from '@fdograph/rut-utilities';\nimport Swal from 'sweetalert2';\nlet AgregaPropietarioComponent = class AgregaPropietarioComponent {\n  constructor(dialogRef, data, servicioService, rutService, rutValidator) {\n    this.dialogRef = dialogRef;\n    this.servicioService = servicioService;\n    this.rutService = rutService;\n    this.rutValidator = rutValidator;\n    this.rutPropietario = new FormControl('', [Validators.required, this.validaRut]);\n    this.nombres = new FormControl('', [Validators.required]);\n    this.apellidoPaterno = new FormControl('', [Validators.required]);\n    this.apellidoMaterno = new FormControl('', [Validators.required]);\n    this.direccion = new FormControl('', [Validators.required]);\n    this.telefono = new FormControl('', [Validators.required]);\n    this.email = new FormControl('', [Validators.required]);\n    this.agrega = new FormGroup({\n      rutPropietario: this.rutPropietario,\n      nombres: this.nombres,\n      apellidoPaterno: this.apellidoPaterno,\n      apellidoMaterno: this.apellidoMaterno,\n      direccion: this.direccion,\n      telefono: this.telefono,\n      email: this.email // address: this.addressFormControl\n\n    });\n    this.usuario = data.usuario;\n  }\n\n  getErrorMessage(campo) {\n    if (campo === 'rutPropietario') {\n      return this.rutPropietario.hasError('required') ? 'Debes ingresar Rut' : this.rutPropietario.hasError('rutInvalido') ? 'Rut Inválido' : '';\n    }\n\n    if (campo === 'nombres') {\n      return this.nombres.hasError('required') ? 'Debes ingresar Nombres' : '';\n    }\n\n    if (campo === 'apellidoPaterno') {\n      return this.apellidoPaterno.hasError('required') ? 'Debes ingresar Apellido Paterno' : '';\n    }\n\n    if (campo === 'apellidoMaterno') {\n      return this.apellidoMaterno.hasError('required') ? 'Debes ingresar Apellido Materno' : '';\n    }\n\n    if (campo === 'direccion') {\n      return this.direccion.hasError('required') ? 'Debes ingresar Dirección' : '';\n    }\n\n    if (campo === 'telefono') {\n      return this.telefono.hasError('required') ? 'Debes ingresar Teléfono' : '';\n    }\n\n    if (campo === 'email') {\n      return this.email.hasError('required') ? 'Debes ingresar Email' : '';\n    }\n\n    return '';\n  }\n\n  validaRut(control) {\n    console.log('uno', control.value); // let out1_rut = this.rutService.getRutChile(0, '12514508-6');\n\n    if (validateRut(control.value) === false) {\n      return {\n        rutInvalido: true\n      };\n    }\n\n    return null;\n  }\n\n  onBlurRut(event) {\n    const rut = event.target.value;\n\n    if (validateRut(rut) === true) {\n      this.agrega.get('rutPropietario').setValue(formatRut(rut, RutFormat.DOTS_DASH));\n    }\n  }\n\n  ngOnInit() {}\n\n  enviar() {\n    this.dato = {\n      rutPropietario: this.agrega.get('rutPropietario').value.toUpperCase(),\n      nombres: this.agrega.get('nombres').value.toUpperCase(),\n      apellidoPaterno: this.agrega.get('apellidoPaterno').value.toUpperCase(),\n      apellidoMaterno: this.agrega.get('apellidoMaterno').value.toUpperCase(),\n      region: 'Sin Region',\n      comuna: 'Sin Comuna',\n      direccion: this.agrega.get('direccion').value.toUpperCase(),\n      telefono: this.agrega.get('telefono').value,\n      email: this.agrega.get('email').value.toUpperCase(),\n      usuarioCrea_id: this.usuario,\n      usuarioModifica_id: this.usuario\n    };\n    console.log('agrega 1:', this.dato);\n    this.servicioService.postDataPropietario(this.dato).subscribe(dato => {\n      console.log('respuesta:', dato.codigo);\n\n      if (dato.codigo === 200) {\n        Swal.fire('Ya se agrego con Exito', 'Click en Boton!', 'success'); // ,\n\n        this.dialogRef.close(1);\n      } else {\n        Swal.fire(dato.mensaje, 'Click en Boton!', 'error');\n        this.dialogRef.close(1);\n      }\n    });\n  } // Error handling\n\n\n  cerrar() {\n    this.dialogRef.close();\n  }\n\n};\nAgregaPropietarioComponent = __decorate([Component({\n  selector: 'app-agrega',\n  templateUrl: './agrega-propietario.component.html',\n  styleUrls: ['./agrega-propietario.component.css']\n}), __param(1, Inject(MAT_DIALOG_DATA))], AgregaPropietarioComponent);\nexport { AgregaPropietarioComponent };","map":null,"metadata":{},"sourceType":"module"}