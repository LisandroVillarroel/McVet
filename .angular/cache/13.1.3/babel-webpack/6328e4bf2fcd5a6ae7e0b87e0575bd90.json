{"ast":null,"code":"import { __decorate, __param } from \"tslib\";\nimport { Component, Inject } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { validateRut, formatRut, RutFormat } from '@fdograph/rut-utilities';\nimport Swal from 'sweetalert2';\nlet AgregaClienteComponent = class AgregaClienteComponent {\n  constructor(dialogRef, data, servCliente, rutService, rutValidator) {\n    this.dialogRef = dialogRef;\n    this.servCliente = servCliente;\n    this.rutService = rutService;\n    this.rutValidator = rutValidator;\n    this.rutCliente = new FormControl('', [Validators.required, this.validaRut]);\n    this.razonSocial = new FormControl('', [Validators.required]);\n    this.nombreFantasia = new FormControl('', [Validators.required]);\n    this.direccion = new FormControl('', [Validators.required]);\n    this.telefono = new FormControl('', [Validators.required]);\n    this.email = new FormControl('', [Validators.required]);\n    this.nombreContacto = new FormControl('', [Validators.required]);\n    this.agregaCliente = new FormGroup({\n      rutCliente: this.rutCliente,\n      razonSocial: this.razonSocial,\n      nombreFantasia: this.nombreFantasia,\n      direccion: this.direccion,\n      telefono: this.telefono,\n      email: this.email,\n      nombreContacto: this.nombreContacto // address: this.addressFormControl\n\n    });\n    this.usuario = data.usuario;\n  }\n\n  ngOnInit() {\n    throw new Error('Method not implemented.');\n  }\n\n  getErrorMessage(campo) {\n    if (campo === 'rutCliente') {\n      return this.rutCliente.hasError('required') ? 'Debes ingresar Rut' : this.rutCliente.hasError('rutInvalido') ? 'Rut Inválido' : '';\n    }\n\n    if (campo === 'razonSocial') {\n      return this.razonSocial.hasError('required') ? 'Debes ingresar Razón Social' : '';\n    }\n\n    if (campo === 'nombreFantasia') {\n      return this.nombreFantasia.hasError('required') ? 'Debes ingresar Nombre Fantasía' : '';\n    }\n\n    if (campo === 'direccion') {\n      return this.direccion.hasError('required') ? 'Debes ingresar Dirección' : '';\n    }\n\n    if (campo === 'telefono') {\n      return this.telefono.hasError('required') ? 'Debes ingresar Teléfono' : '';\n    }\n\n    if (campo === 'email') {\n      return this.email.hasError('required') ? 'Debes ingresar Email' : '';\n    }\n\n    if (campo === 'nombreContacto') {\n      return this.nombreContacto.hasError('required') ? 'Debes ingresar Nombre Contacto' : '';\n    }\n    /* return this.rutEmpresa.hasError('required') ? 'Debes ingresar Rut' :\r\n           this.rutEmpresa.hasError('rutInvalido') ? 'Rut Inválido' :\r\n        this.razonSocial.hasError('required') ? 'Debes ingresar Razón Social' :\r\n        this.nombreFantasia.hasError('required') ? 'Debes ingresar Nombre Fantasía' :\r\n        this.direccion.hasError('required') ? 'Debes ingresar Dirección' :\r\n            '';\r\n          */\n\n\n    return '';\n  }\n\n  validaRut(control) {\n    console.log('uno', control.value); // let out1_rut = this.rutService.getRutChile(0, '12514508-6');\n\n    if (validateRut(control.value) === false) {\n      return {\n        rutInvalido: true\n      };\n    }\n\n    return null;\n  }\n\n  onBlurRutCliente(event) {\n    const rut = event.target.value;\n\n    if (validateRut(rut) === true) {\n      this.agregaCliente.get('rutCliente').setValue(formatRut(rut, RutFormat.DOTS_DASH));\n    }\n  }\n\n  enviar() {\n    this.datoCliente = {\n      rutCliente: this.agregaCliente.get('rutCliente').value.toUpperCase(),\n      razonSocial: this.agregaCliente.get('razonSocial').value.toUpperCase(),\n      nombreFantasia: this.agregaCliente.get('nombreFantasia').value.toUpperCase(),\n      direccion: this.agregaCliente.get('direccion').value.toUpperCase(),\n      telefono: this.agregaCliente.get('telefono').value,\n      email: this.agregaCliente.get('email').value.toUpperCase(),\n      nombreContacto: this.agregaCliente.get('nombreContacto').value.toUpperCase(),\n      usuarioCrea_id: this.usuario,\n      usuarioModifica_id: this.usuario\n    };\n    console.log('agrega 1:', this.datoCliente);\n    this.servCliente.postDataCliente(this.datoCliente).subscribe(dato => {\n      console.log('respuesta:', dato.codigo);\n\n      if (dato.codigo === 200) {\n        Swal.fire('Ya se agrego con Exito', 'Click en Boton!', 'success'); // ,\n\n        this.dialogRef.close(1);\n      } else {\n        Swal.fire(dato.mensaje, 'Click en Boton!', 'error');\n        this.dialogRef.close(1);\n      }\n    } // console.log('yo:', res as PerfilI[]),\n    /// error => {\n    ///   console.log('error agregar:', error);\n    /// }\n    // this.dialogRef.close(this.form.value);\n    // console.log(this.datoCotiza);\n    );\n  } // Error handling\n\n\n  cerrar() {\n    this.dialogRef.close();\n  }\n\n};\nAgregaClienteComponent = __decorate([Component({\n  selector: 'app-agrega-cliente',\n  templateUrl: './agrega-cliente.component.html',\n  styleUrls: ['./agrega-cliente.component.css']\n}), __param(1, Inject(MAT_DIALOG_DATA))], AgregaClienteComponent);\nexport { AgregaClienteComponent };","map":null,"metadata":{},"sourceType":"module"}